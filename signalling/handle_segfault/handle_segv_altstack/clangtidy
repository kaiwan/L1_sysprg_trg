# ref: https://clang.llvm.org/extra/clang-tidy/

hash clang-tidy 2>/dev/null || {
  echo "Install clang-tidy first" ; exit 1
}

CHECKS_ON="-*,clang-analyzer-*,cert-*,concurrency-*,performance-*,portability-*,linuxkernel-*,readability-*,misc-*"
  # -* implies all clang-tidy checks are Off; has to be the first option..
CHECKS_OFF="-clang-analyzer-cplusplus*"
# -<opt>-* implies all <opt> checks are Off
# <opt>-* implies all <opt> checks are On

cmd="clang-tidy --use-color handle_segv_altstack.c -checks=${CHECKS_ON},${CHECKS_OFF} -header-filter=.*"
echo "${cmd}"
eval "${cmd}"
